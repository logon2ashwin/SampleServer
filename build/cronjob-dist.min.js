var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,a){var i,n,r;for(e instanceof String&&(e+=""),i=e.length,n=0;n<i;n++)if(r=e[n],t.call(a,r,n,e))return{i:n,v:r};return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,a,i){if(t){for(a=$jscomp.global,e=e.split("."),i=0;i<e.length-1;i++){var n=e[i];n in a||(a[n]={}),a=a[n]}e=e[e.length-1],i=a[e],t=t(i),t!=i&&null!=t&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.Symbol=function(){var e=0;return function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+e++}}(),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),e={next:e},e[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var a=0,i={next:function(){if(a<e.length){var n=a++;return{value:t(n,e[n]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=73)}([function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("request")},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({status:{type:String,default:""},date:{type:String,default:""},auto_match_id:{type:String,default:""},auto_match_link:{type:String,default:""},auto_match_guid:{type:String,default:""},scoreupdate:{type:String,default:"manual"},match_type:{type:String,default:""},match_view_status:{type:String,default:"active"},innings:{first:{type:String,default:""},second:{type:String,default:""},third:{type:String,default:""},fourth:{type:String,default:""},current:{type:String,default:"0"}},currentoverscore:{type:Number,default:"0"},team_1:{teamid:{type:t.Types.ObjectId,ref:"activeteam"},overs:{type:Number,default:0},balls:{type:Number,default:0},scores:{type:Number,default:0},wickets:{type:Number,default:0},second_innings_overs:{type:Number,default:0},second_innings_balls:{type:Number,default:0},second_innings_scores:{type:Number,default:0},second_innings_wickets:{type:Number,default:0},wide:{type:Number,default:0},noball:{type:Number,default:0},byes:{type:Number,default:0},legbyes:{type:Number,default:0},second_innings_wide:{type:Number,default:0},second_innings_noball:{type:Number,default:0},second_innings_byes:{type:Number,default:0},second_innings_legbyes:{type:Number,default:0},toss:Boolean,status:{type:Boolean,default:!1},totalovers:Number,targetscore:Number,runrate:{type:String,default:"0.00"},battingcompleted:{type:Boolean,default:!1},scorecard:[{innings:{type:Number},player_id:{type:t.Types.ObjectId,ref:"playerlist"},player_name:{type:String},wicket:{type:Number,default:0},score:{type:Number},balls:{type:Number},wicket_type:{type:String},striker_end_batsman:{type:Boolean,default:!1},playing:{type:Boolean,default:!1},wicket_by:{type:String},wicket_notes:{type:String,default:""},sixes:{type:Number,default:0},fours:{type:Number,default:0},strike_rate:{type:Number,default:0}}],scorecard_auto:[{innings:{type:Number},player_name:{type:String},wicket:{type:Number,default:0},score:{type:Number},balls:{type:Number},striker_end_batsman:{type:Boolean,default:!1},playing:{type:Boolean,default:!1},wicket_type:{type:String},wicket_by:{type:String},wicket_notes:{type:String},sixes:{type:Number,default:0},fours:{type:Number,default:0},strike_rate:{type:Number,default:0}}],bowler_scorecard:[{player_id:{type:t.Types.ObjectId,ref:"playerlist"},innings:{type:Number,default:1},player_name:{type:String},numberofwickets:{type:Number,default:0},playing:{type:Boolean,default:!1},maiden:{type:Number,default:0},economy:{type:Number},runs:{type:Number},balls:{type:Number}}],bowler_scorecard_auto:[{innings:{type:Number},player_name:{type:String},overs:{type:String},numberofwickets:{type:Number,default:0},playing:{type:Boolean,default:!1},runs:{type:Number},balls:{type:Number},economy:{type:Number},dots:{type:Number},maiden:{type:Number,default:0},fours:{type:Number},sixes:{type:Number},wide:{type:Number},noball:{type:Number}}],fall_of_wickets:[{innings:{type:Number},player_id:{type:t.Types.ObjectId,ref:"playerlist"},player_name:{type:String},overs:{type:String},balls:{type:Number},wicket_position:{type:Number},score:{type:Number}}]},team_2:{teamid:{type:t.Types.ObjectId,ref:"activeteam"},overs:{type:Number,default:0},balls:{type:Number,default:0},scores:{type:Number,default:0},wickets:{type:Number,default:0},second_innings_overs:{type:Number,default:0},second_innings_balls:{type:Number,default:0},second_innings_scores:{type:Number,default:0},second_innings_wickets:{type:Number,default:0},wide:{type:Number,default:0},noball:{type:Number,default:0},byes:{type:Number,default:0},legbyes:{type:Number,default:0},second_innings_wide:{type:Number,default:0},second_innings_noball:{type:Number,default:0},second_innings_byes:{type:Number,default:0},second_innings_legbyes:{type:Number,default:0},toss:Boolean,status:{type:Boolean,default:!1},totalovers:Number,targetscore:Number,runrate:{type:String,default:"0.00"},battingcompleted:{type:Boolean,default:!1},scorecard:[{innings:{type:Number},player_id:{type:t.Types.ObjectId,ref:"playerlist"},player_name:{type:String},wicket:{type:Number,default:0},striker_end_batsman:{type:Boolean,default:!1},playing:{type:Boolean,default:!1},score:{type:Number},balls:{type:Number},wicket_notes:{type:String,default:""},wicket_type:{type:String},wicket_by:{type:String},sixes:{type:Number,default:0},fours:{type:Number,default:0},strike_rate:{type:String,default:0}}],scorecard_auto:[{innings:{type:Number},player_name:{type:String},wicket:{type:Number,default:0},striker_end_batsman:{type:Boolean,default:!1},playing:{type:Boolean,default:!1},overs:{type:Number},score:{type:Number},balls:{type:Number},wicket_type:{type:String},wicket_by:{type:String},wicket_notes:{type:String,default:""},sixes:{type:Number,default:0},fours:{type:Number,default:0},strike_rate:{type:String,default:0}}],bowler_scorecard:[{player_id:{type:t.Types.ObjectId,ref:"playerlist"},innings:{type:Number,default:1},player_name:{type:String},playing:{type:Boolean,default:!1},numberofwickets:{type:Number,default:0},maiden:{type:Number,default:0},economy:{type:Number},runs:{type:Number},balls:{type:Number}}],bowler_scorecard_auto:[{innings:{type:Number},player_name:{type:String},playing:{type:Boolean,default:!1},numberofwickets:{type:Number,default:0},overs:{type:String},runs:{type:Number},balls:{type:Number},economy:{type:Number},dots:{type:Number},maiden:{type:Number,default:0},fours:{type:Number},sixes:{type:Number},wide:{type:Number},noball:{type:Number}}],fall_of_wickets:[{innings:{type:Number},player_id:{type:t.Types.ObjectId,ref:"playerlist"},player_name:{type:String},overs:{type:String},balls:{type:Number},wicket_position:{type:Number},score:{type:Number}}]},tournament:{type:t.Types.ObjectId,ref:"tournament"},session_overs:{type:Number,default:0},session_rate:{type:Number,default:0},session_rate1:{type:Number,default:0},market_rate:{type:Number,default:0},market_rate1:{type:Number,default:0},fav_team:{type:String,default:"None"},current_match_status:{type:String,default:"none"},match_details:{type:String,default:"-"},match_venue:{type:String,default:"-"},created_At:{type:Date},updated_At:{type:Date}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("matchlist"))return e.model("matchlist")}catch(a){if("MissingSchemaError"===a.name)return e.model("matchlist",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({match_id:{type:t.Types.ObjectId,ref:"matchlists"},team:{type:t.Types.ObjectId,ref:"activeteam"},innings:{type:Number,default:0},batsman_id:[{player_name:{type:String},runs:{type:Number},balls:{type:Number},fours:{type:Number},sixes:{type:Number},strike_rate:{type:Number},age:{type:Number},type:{type:String}}],active_batsman:{player_name:{type:String},runs:{type:Number},balls:{type:Number},fours:{type:Number},sixes:{type:Number},strike_rate:{type:Number},age:{type:Number},type:{type:String}},active_bowler:{player_name:{type:String},age:{type:Number},type:{type:String},overs:{type:String},runs:{type:Number},economy:{type:Number},wicket:{type:Number}},previous_bowler:{player_name:{type:String},age:{type:Number},type:{type:String},overs:{type:String},runs:{type:Number},economy:{type:Number},wicket:{type:Number}},event:{six:{type:Number,default:0},four:{type:Number,default:0},three:{type:Number,default:0},two:{type:Number,default:0},one:{type:Number,default:0},dot:{type:Number},noball:{type:Number},freehit:{type:Number},wide:{type:Number},leg_bye:{type:Number},bye:{type:Number},wicket:{type:Number,default:0},wicket_type:{type:String},wicket_by:{type:String},third_player:{player_name:{type:String},age:{type:Number},type:{type:String}},wicket_notes:{type:String}},balls:{type:Number,default:0},overs:{type:Number,default:0},notes:{type:String,default:null}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("scoresauto"))return e.model("scoresauto")}catch(a){if("MissingSchemaError"===a.name)return e.model("scoresauto",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({match_id:{type:t.Types.ObjectId,ref:"matchlists"},ball:{type:Number},over:{type:Number},text:{type:String},team:{type:String},innings:{type:Number,default:1},updated_At:{type:Date},created_At:{type:Date}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("commentary"))return e.model("commentary")}catch(a){if("MissingSchemaError"===a.name)return e.model("commentary",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){e.exports={getconfig:function(){if(a(18),process.env.ENVIRONMENT)var e=a(18);else e=a(30),console.log("Set ENVIRONMENT=dev|test|prod");return e}}},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({team_name:{type:String},short_name:{type:String},country:{type:String},alias:{type:String},autofetch:{type:String,default:"off"},flag:{type:String},active_players:[{type:t.Types.ObjectId,ref:"playerlist"}]}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("activeteam"))return e.model("activeteam")}catch(a){if("MissingSchemaError"===a.name)return e.model("activeteam",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=new e.Schema({tournament_name:{type:String},overs:{type:Number}});t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("tournament"))return e.model("tournament")}catch(a){if("MissingSchemaError"===a.name)return e.model("tournament",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){var t,i;e=a(0),t=e.Schema,a(19),a(14),i=a(20)(e),t=new t({name:{type:String},country:{type:String},phone:{type:String},profilepicture:{type:String},email:{type:String},username:{type:String},password:{type:String},social_name:{type:String},socialtype:{type:String},socialid:{type:String},social_token:{type:String},role:{type:String,enum:["admin","leader","scorer","user"],default:"user"},cd:{type:Date,default:Date.now}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()}),t.plugin(i,{});try{if(e.model("accounts"))return e.model("accounts")}catch(a){if("MissingSchemaError"===a.name)return console.log("Registered Model: accounts"),e.model("accounts",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({match_id:{type:t.Types.ObjectId,ref:"matchlists"},ball:{type:Number},over:{type:Number},innings:{type:Number},notification_type:{type:String},team:{type:String},wicket:{type:Number},title:{type:String},body:{type:String},match_result:{type:String},updated_At:{type:Date},created_At:{type:Date}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("pushnotifications"))return e.model("pushnotifications")}catch(a){if("MissingSchemaError"===a.name)return e.model("pushnotifications",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){e.exports={sendscorecard:function(e,t,i,n){function r(e,t,a,i,n,r){"auto"==a.scoreupdate?i.scoresauto.find(n).populate("team").exec(function(a,i){r(e,t,a,i)}):i.scores.find(n).populate("batsman_id").populate("bowler_id").populate("active_batsman").populate("active_bowler").populate("team").exec(function(a,i){r(e,t,a,i)})}var s="none",o=a(28);"none"!=(s="http"==n?e.params.id:i.matchID)&&i.match.findOne({_id:s}).populate("team_1.teamid").populate("team_2.teamid").populate("tournament").exec(function(a,c){var l,d,m;a?"http"==n?t.send({status:"error"}):(void 0!==e.app?e.app.get("socketio"):i.socketio).sockets.emit({status:"error"}):(l={match:{}},c?(l.match=c,a={},a.match_id=s,1==c.team_1.status?(a.team=c.team_1.teamid._id,a.balls=c.team_1.balls,a.overs=c.team_1.overs):(a.team=c.team_2.teamid._id,a.balls=c.team_2.balls,a.overs=c.team_2.overs),l.reqrunrate=0,c.team_1.battingcompleted?(d=c.team_2.scores,m=c.team_2.overs,l.reqrunrate=0==c.team_2.balls?d/m:d/((6*m+c.team_2.balls)/6),"auto"==c.scoreupdate&&(l.reqrunrate=parseFloat(c.team_2.runrate))):c.team_2.battingcompleted&&(d=c.team_1.scores,m=c.team_1.overs,l.reqrunrate=0==c.team_1.balls?d/m:d/((6*m+c.team_1.balls)/6),"auto"==c.scoreupdate&&(l.reqrunrate=parseFloat(c.team_1.runrate))),l.innings={},(void 0!==c.team_1.toss||void 0!==c.team_1.toss)&&(c.team_1.toss||c.team_2.toss)?(c.team_1.battingcompleted||c.team_2.battingcompleted?(c.team_1.battingcompleted?(l.innings.current="2",l.innings.first="team1",l.innings.second="team2"):(l.innings.current="2",l.innings.first="team2",l.innings.second="team1"),c.team_1.battingcompleted&&c.team_2.battingcompleted&&(l.innings.current="completed")):c.team_1.status?(l.innings.current="1",l.innings.first="team1",l.innings.second="team2"):(l.innings.current="1",l.innings.first="team2",l.innings.second="team1"),"auto"==c.scoreupdate&&(l.innings.first=c.innings.first,l.innings.second=c.innings.second,l.innings.third=c.innings.third,l.innings.fourth=c.innings.fourth,l.innings.current=c.innings.current)):(l.innings.current="0",l.innings.first="none",l.innings.second="none"),"auto"==l.match.scoreupdate&&(l.match.team_1.scorecard=l.match.team_1.scorecard_auto,l.match.team_2.scorecard=l.match.team_2.scorecard_auto,l.match.team_1.bowler_scorecard=l.match.team_1.bowler_scorecard_auto,l.match.team_2.bowler_scorecard=l.match.team_2.bowler_scorecard_auto),l.reqrunrate=l.reqrunrate.toFixed(2),r(e,t,l.match,i,a,function(e,t,a,r){a?"http"==n?t.send({status:"error"}):(void 0!==e.app?e.app.get("socketio"):i.socketio).sockets.emit({status:"error"}):(a={event:{},_id:0},0<r.length&&(a=r[r.length-1]),void 0===a.event.dot&&(a.event.dot=0),void 0===a.event.six&&(a.event.six=0),void 0===a.event.four&&(a.event.four=0),void 0===a.event.three&&(a.event.three=0),void 0===a.event.two&&(a.event.two=0),void 0===a.event.one&&(a.event.one=0),void 0===a.event.dot&&(a.event.dot=0),void 0===a.event.noball&&(a.event.noball=0),void 0===a.event.freehit&&(a.event.freehit=0),void 0===a.event.wide&&(a.event.wide=0),void 0===a.event.leg_bye&&(a.event.leg_bye=0),void 0===a.event.bye&&(a.event.bye=0),void 0===a.event.wicket&&(a.event.wicket=0),void 0===a.event.wicket_type&&(a.event.wicket_type=""),void 0===a.event.wicket_notes&&(a.event.wicket_notes=""),l.scores=a,r={match_id:s},"1"==l.innings.current&&("team1"==l.innings.first&&(r.over=l.match.team_1.overs,r.team="team1"),"team2"==l.innings.first&&(r.over=l.match.team_2.overs,r.team="team2")),"2"==l.innings.current&&("team1"==l.innings.second&&(r.team="team1",r.over=l.match.team_1.overs),"team2"==l.innings.second&&(r.team="team2",r.over=l.match.team_2.overs)),i.Commentaries.find(r).sort({over:-1,ball:-1}).limit(6).exec(function(a,r){a?"http"==n?t.send({status:"error"}):(a=void 0!==e.app?e.app.get("socketio"):i.socketio,a.sockets.emit({status:"error"})):(l.commentary=r,"http"==n?t.send({status:"success",results:l}):(a=void 0!==e.app?e.app.get("socketio"):i.socketio,a.emit("scorecard",{status:"success",results:l}),o.pushmatchresult({matchdetails:l.match},function(){}),o.pushwicket({matchdetails:l.match},function(){})))}))})):t.send({status:"no_results",results:l}))})}}},function(e,t,a){t=function(e){e=a(0);var t=e.Schema;t=new t({match_id:{type:t.Types.ObjectId,ref:"playerlist"},team:{type:t.Types.ObjectId,ref:"activeteam"},innings:{type:Number,default:0},batsman_id:[{type:t.Types.ObjectId,ref:"playerlist"}],active_batsman:{type:t.Types.ObjectId,ref:"playerlist"},active_bowler:{type:t.Types.ObjectId,ref:"playerlist"},previous_bowler:{type:t.Types.ObjectId,ref:"playerlist"},event:{six:{type:Number,default:0},four:{type:Number,default:0},three:{type:Number,default:0},two:{type:Number,default:0},one:{type:Number,default:0},dot:{type:Number},noball:{type:Number},freehit:{type:Number},wide:{type:Number},leg_bye:{type:Number},bye:{type:Number},wicket:{type:Number,default:0},wicket_type:{type:String},wicket_by:{type:String},third_player:{type:t.Types.ObjectId,ref:"playerlist"},wicket_notes:{type:String}},balls:{type:Number,default:0},overs:{type:Number,default:0},notes:{type:String,default:null}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("score"))return e.model("score")}catch(a){if("MissingSchemaError"===a.name)return e.model("score",t)}},e.exports={getModel:t,registerModel:t}},function(e,t){e.exports=require("cheerio")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("crypto")},function(e,t,a){t=function(e){e=a(0);var t=a(33),i=e.Schema;i=new i({projectid:{type:String},projectleadid:{type:i.Types.ObjectId,ref:"projectleads"},campaignid:{type:String},clientid:{type:String},receipientemail:{type:String},subject:{type:String},message:{type:String},updated_At:{type:Date},created_At:{type:Date},casessionid:{type:String},causerid:{type:String},attachments:[{type:i.Types.ObjectId,ref:"attachments",required:!0}],attachmentlinks:[{type:String}]}),i.plugin(t),i.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("emails"))return e.model("emails")}catch(t){if("MissingSchemaError"===t.name)return e.model("emails",i)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=new e.Schema({title:{type:String},description:{type:String},link:{type:String},guid:{type:String},pubdate:{type:String},content:{type:String},headerimage:{type:String},created_At:{type:Date},updated_At:{type:Date}});t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("newsfeed"))return e.model("newsfeed")}catch(a){if("MissingSchemaError"===a.name)return e.model("newsfeed",t)}},e.exports={getModel:t,registerModel:t}},function(e,t){e.exports={isemptyObj:function(e){return void 0===e||0<Object.keys(e).length},isvalidData:function(e){return void 0!==e&&(null!=e&&(0<e.length&&"null"!=e&&"undefined"!=e))}}},function(e,t){e.exports={service:{host:"http://cricwormapi.clofus.com",port:8e3,apiversion:"v1",baseurl:"http://cricworm.clofus.com"},database:{host:"localhost",port:27017,db:"cricworm",username:"cricworm",password:"7Qwerty706",replicaset:!1},email:{username:"support@clofus.com",password:"0182680c955d37f1ba707640aba9b0ed",from:"support@clofus.com",service:"mailgun",host:"smtp.mailgun.org",port:587,trackerimage:"/logo_tiny.png"}}},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("mongoose-deep-populate")},function(e,t,a){t=function(e){var t,i;e=a(0),t=e.Schema,a(19),a(14),i=a(20)(e),t=new t({filename:{type:String},projectid:{type:t.Types.ObjectId,ref:"projects"},emailid:{type:t.Types.ObjectId,ref:"emails"},clientid:{type:String},causerid:{type:String},casessionid:{type:String},created_At:{type:Date},updated_At:{type:Date}}),t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()}),t.plugin(i,{});try{if(e.model("attachments"))return e.model("attachments")}catch(a){if("MissingSchemaError"===a.name)return console.log("Registered Model: attachments"),e.model("attachments",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=new e.Schema({user_id:{type:String,required:!0},token:{type:String},session:{type:Date,default:Date.now}});t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("oauths"))return e.model("oauths")}catch(a){if("MissingSchemaError"===a.name)return e.model("oauths",t)}},e.exports={getModel:t,registerModel:t}},function(e,t,a){t=function(e){e=a(0);var t=new e.Schema({player_name:{type:String},age:{type:Number},type:{type:String}});t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("playerlist"))return e.model("playerlist")}catch(a){if("MissingSchemaError"===a.name)return e.model("playerlist",t)}},e.exports={getModel:t,registerModel:t}},function(e,t){e.exports=require("xml2js")},,function(e,t,a){t=function(e){e=a(0);var t=new e.Schema({event:{type:String},filename:{type:String,default:""},created_At:{type:Date},updated_At:{type:Date}});t.pre("save",function(e){var t=new Date;this.updated_At=t,this.created_At||(this.created_At=t),e()});try{if(e.model("gifs"))return e.model("gifs")}catch(a){if("MissingSchemaError"===a.name)return e.model("gifs",t)}},e.exports={getModel:t,registerModel:t}},function(e,t){e.exports=require("moment")},function(e,t,a){e.exports={send:function(e,t){var i,n,r=a(1),s=a(9).getModel();e.notification_type="all",i={notification:{}},i.notification.title=e.matchdetails.team_1.teamid.team_name+" vs "+e.matchdetails.team_2.teamid.team_name,i.to="/topics/M_"+e.match_id+"_"+e.notification_type,n={},"match_status"==e.notification_msg_type?(n.match_id=e.match_id,n.innings=e.innings,n.notification_type=e.notification_msg_type,i.notification.body=e.notification_body):"wicket"==e.notification_msg_type&&(n.match_id=e.match_id,n.innings=e.innings,n.wicket=e.wicket,n.notification_type=e.notification_msg_type,i.notification.body=e.notification_body),s.find(n).exec(function(a,n){a?t({status:"error",msg:"error in find"}):0==n.length?r({method:"POST",headers:{"Content-Type":"application/json",Authorization:"key=AAAA27BBYGI:APA91bFgaxvkq61FxnWArhOnPZHCUHnhZgBlInE4LC7RSS74MP7bl881fj6toBNpjmtTuRw973fy-txNhyl-rQJq8vEg3989Q0Q4hu8uRQ_MN8dcFSDbjgTJEDZuCZ-bcv12SDNpuu0a"},url:"https://fcm.googleapis.com/fcm/send",json:!0,body:i},function(a,i,n){a?t({status:"error",msg:"error in sending request"}):new s({match_id:e.match_id,title:e.title,body:e.body,innings:e.innings,over:e.over,ball:e.balls,match_result:e.match_result,notification_type:e.notification_msg_type,created_At:new Date,updated_At:new Date}).save(function(e,a){t(e?{status:"error",msg:"error in save notification"}:{status:"success",msg:"notification sent"})})}):t({status:"success",msg:"notification already sent"})})},pushwicket:function(e,t){function i(t){new c({match_id:e.matchdetails._id,notification_type:"wickets",innings:e.matchdetails.innings.current,wicket:r.wicket_position,title:s.notification.title,body:s.notification.body,created_At:new Date}).save(function(e,a){e||o({method:"POST",headers:{"Content-Type":"application/json",Authorization:"key=AAAA27BBYGI:APA91bFgaxvkq61FxnWArhOnPZHCUHnhZgBlInE4LC7RSS74MP7bl881fj6toBNpjmtTuRw973fy-txNhyl-rQJq8vEg3989Q0Q4hu8uRQ_MN8dcFSDbjgTJEDZuCZ-bcv12SDNpuu0a"},url:"https://fcm.googleapis.com/fcm/send",json:!0,body:s},function(e,a,i){t()})})}var n,r,s,o=a(1),c=a(9).getModel();t="none",n=[],r=[],s={notification:{}},s.notification.title=e.matchdetails.match_details+" - "+e.matchdetails.team_1.teamid.team_name+" vs "+e.matchdetails.team_2.teamid.team_name,s.to="/topics/M_"+e.matchdetails._id+"_all","1"==e.matchdetails.innings.current?t=e.matchdetails.innings.first:"2"==e.matchdetails.innings.current?t=e.matchdetails.innings.second:"3"==e.matchdetails.innings.current?t=e.matchdetails.innings.third:"4"==e.matchdetails.innings.current&&(t=e.matchdetails.innings.fourth),"team1"==t?(n=e.matchdetails.team_1.fall_of_wickets,currentteamdetails=e.matchdetails.team_1):"team2"==t&&(n=e.matchdetails.team_2.fall_of_wickets,currentteamdetails=e.matchdetails.team_2),"none"!=t&&0<n.length&&(r=n[n.length-1],s.notification.body=" Wicket: "+r.player_name+", "+currentteamdetails.teamid.alias+" "+r.score+"/"+r.wicket_position+" Overs "+r.overs+"."+r.balls,c.find({match_id:e.matchdetails._id,innings:e.matchdetails.innings.current,wicket:r.wicket_position,notification_type:"wickets"}).exec(function(e,t){0==t.length&&i(function(){})}))},pushmatchresult:function(e,t){function i(t){new r({match_id:e.matchdetails._id,notification_type:"match_result",match_result:e.matchdetails.current_match_status,title:s.notification.title,body:s.notification.body,created_At:new Date}).save(function(e,a){e||n({method:"POST",headers:{"Content-Type":"application/json",Authorization:"key=AAAA27BBYGI:APA91bFgaxvkq61FxnWArhOnPZHCUHnhZgBlInE4LC7RSS74MP7bl881fj6toBNpjmtTuRw973fy-txNhyl-rQJq8vEg3989Q0Q4hu8uRQ_MN8dcFSDbjgTJEDZuCZ-bcv12SDNpuu0a"},url:"https://fcm.googleapis.com/fcm/send",json:!0,body:s},function(e,a,i){t()})})}var n=a(1),r=a(9).getModel(),s={notification:{}};s.notification.title=e.matchdetails.match_details+" - "+e.matchdetails.team_1.teamid.team_name+" vs "+e.matchdetails.team_2.teamid.team_name,s.to="/topics/M_"+e.matchdetails._id+"_all",s.notification.body="Match status: "+e.matchdetails.current_match_status+" "+e.matchdetails.team_1.teamid.alias+" "+e.matchdetails.team_1.scores+"/"+e.matchdetails.team_1.wickets+" "+e.matchdetails.team_2.teamid.alias+" "+e.matchdetails.team_2.scores+"/"+e.matchdetails.team_2.wickets,"test"==e.matchdetails.match_type&&(s.notification.body="Match status: "+e.matchdetails.current_match_status+" "+e.matchdetails.team_1.teamid.alias+" "+e.matchdetails.team_1.scores+"/"+e.matchdetails.team_1.wickets+" & "+e.matchdetails.team_1.second_innings_scores+"/"+e.matchdetails.team_1.second_innings_wickets+" "+e.matchdetails.team_2.teamid.alias+" "+e.matchdetails.team_2.scores+"/"+e.matchdetails.team_2.wickets+" & "+e.matchdetails.team_2.second_innings_scores+"/"+e.matchdetails.team_2.second_innings_wickets),r.find({match_id:e.matchdetails._id,notification_type:"match_result"}).sort("-created_At").exec(function(a,n){a||(0==n.length?i(function(){t()}):0<n.length&&n[n.length-1].match_result!=e.matchdetails.current_match_status&&i(function(){t()}))})},pushsession:function(e,t){var i=a(1),n={notification:{}};n.notification.title=e.matchdetails.match_details+" - "+e.matchdetails.team_1.teamid.team_name+" vs "+e.matchdetails.team_2.teamid.team_name,n.to="/topics/M_"+e.matchdetails._id+"_all",n.notification.body="Favourite Team: "+e.matchdetails.fav_team+"  Market Rate: "+e.matchdetails.market_rate+" - "+e.matchdetails.market_rate1+" Session Rate: (Over "+e.matchdetails.session_overs+" / Rate "+e.matchdetails.session_rate+" - "+e.matchdetails.session_rate1+")",i({method:"POST",headers:{"Content-Type":"application/json",Authorization:"key=AAAA27BBYGI:APA91bFgaxvkq61FxnWArhOnPZHCUHnhZgBlInE4LC7RSS74MP7bl881fj6toBNpjmtTuRw973fy-txNhyl-rQJq8vEg3989Q0Q4hu8uRQ_MN8dcFSDbjgTJEDZuCZ-bcv12SDNpuu0a"},url:"https://fcm.googleapis.com/fcm/send",json:!0,body:n},function(e,a,i){t()})}}},function(e,t,a){e.exports={fetch:function(e,t,i){function n(e){if(0<e.length){var t=e.pop();r({url:t.link[0],jar:!0},function(i,r,c){var l,d,m,u,p=a(12).load(c);try{l={title:t.title[0],description:t.description[0],content:t.description[0],link:t.link[0],guid:t.guid[0],pubdate:t.pubDate[0],created_At:s(t.pubDate[0]),updated_At:new Date},i||(p(".article").each(function(e){0==e&&(d=p(this).find(".article-body>p").text(),m=p(this).find("picture>source").attr("srcset"))}),d?(l.content=d,l.headerimage=m):(u=p(".story-content-main>p").text())&&(l.content=u,l.headerimage=p(".story-content-main").find(".first-image>img").attr("src"))),new o(l).save(function(t,a){n(e)})}catch(e){}})}}var r=a(1),s=a(27),o=a(16).getModel(e),c=a(24).parseString;r({url:"http://www.espncricinfo.com/rss/content/story/feeds/0.xml",jar:!0},function(e,t,a){e?i({status:"error",result:{}}):c(a,function(e,t){e?i({status:"error",result:{}}):o.remove({}).exec(function(e,a){e?i({status:"error",result:{}}):(n(t.rss.channel[0].item),i({status:"success",result:t}))})})})}}},function(e,t){e.exports={service:{host:"http://localhost",port:80,apiversion:"v1",baseurl:"http://localhost"},database:{host:"localhost",port:27017,db:"cricketapp",username:"",password:""},email:{username:"support@clofus.com",password:"0182680c955d37f1ba707640aba9b0ed",from:"support@clofus.com",service:"mailgun",host:"smtp.mailgun.org",port:587,trackerimage:"/logo_tiny.png"},googlemaps:{key:"AIzaSyCAZS4vCDwjVZgs-COeAC0YQfJAZv8BQk4"}}},function(e,t,a){e.exports={initialize:function(){var e,t,i,n,r,s;if(a(13),e=a(0),t=a(5).getconfig(),i=a(32),t.database.replicaset){for(n="mongodb://"+t.database.username+":"+t.database.password+"@",r=t.database.replicaSets,s=0;s<r.nodes.length;s++)0<s&&s<r.nodes.length&&(n+=","),n=n+r.nodes[s].host+":"+r.nodes[s].port;n=n+"/"+t.database.db,n=n+"?"+i.stringify(r.options)}else n="mongodb://"+t.database.username+":"+t.database.password+"@"+t.database.host+"/"+t.database.db;return console.log("Connecting...",n),e.connect(n),a(8).registerModel(e),a(6).registerModel(e),a(21).registerModel(e),a(4).registerModel(e),a(15).registerModel(e),a(26).registerModel(e),a(2).registerModel(e),a(16).registerModel(e),a(22).registerModel(e),a(23).registerModel(e),a(9).registerModel(e),a(11).registerModel(e),a(3).registerModel(e),a(7).registerModel(e),e.connection.on("error",console.error.bind(console,"connection error")),e}}},function(e,t){e.exports=require("query-string")},function(e,t){e.exports=require("mongoose-paginate")},,,function(e,t,a){e.exports={matches:function(e,t){function i(e){if(0<e.length){var t=e.pop();s(t.link[0],function(a,n,s){var m,u,p,_,f;if(!a){n=r.load(s),s=n(".game-details.header").text().split(" at "),m={},m.current_match_status=n(".game-time").text().toLowerCase(),a=1<s[0].split(",").length?s[0].split(",")[1]:s[0],u={team_name:n(".team-name.app_partial >.long-name").eq(0).text(),short_name:n(".team-name.app_partial >.short-name").eq(0).text(),alias:n(".team-name.app_partial >.abbrev").eq(0).text(),country:""},p={team_name:n(".team-name.app_partial >.long-name").eq(1).text(),short_name:n(".team-name.app_partial >.short-name").eq(1).text(),alias:n(".team-name.app_partial >.abbrev").eq(1).text(),country:""};try{-1<n(".game-details.header").text().split(" at ")[1].split(",")[1].indexOf("-")?m.match_type="test":m.match_type="limited_over"}catch(e){}try{_=n(".team-logo").eq(0).attr("data-src").split("&"),u.flag=0<_.length?_[0]+"?&w=200&h=200":_+"?&w=200&h=200",f=n(".team-logo").eq(3).attr("data-src").split("&"),p.flag=0<f.length?f[0]+"?&w=200&h=200":f+"?&w=200&h=200"}catch(e){}m.match_venue=n(".stadium-details>h4>a").attr("name"),m.match_details=s[0].split(",")[0],m.auto_match_link=t.link[0],m.auto_match_guid=t.guid[0],m.scoreupdate="auto",m.match_view_status="inactive",_=m.auto_match_guid.split("/"),0<_.length&&(m.auto_match_id=_[_.length-1].split(".")[0]),o.isvalidData(a)&&o.isvalidData(u.team_name)&&o.isvalidData(p.team_name)&&o.isvalidData(u.alias)&&o.isvalidData(p.alias)&&o.isvalidData(m.match_type)?l.findOneAndUpdate({tournament_name:a},{tournament_name:a,overs:0},{upsert:!0,new:!0},function(t,a){t?console.log("error in create tournament"):(m.tournament=a._id,c.findOneAndUpdate({team_name:u.team_name},u,{upsert:!0,new:!0},function(t,a){m.team_1={},m.team_1.teamid=a._id,m.team_1.status=!1,"on"==a.autofetch&&(m.match_view_status="active"),t||c.findOneAndUpdate({team_name:p.team_name},p,{upsert:!0,new:!0},function(t,a){t||(m.team_2={},m.team_2.teamid=a._id,m.team_2.status=!1,"on"==a.autofetch&&(m.match_view_status="active"),d.findOneAndUpdate({auto_match_id:m.auto_match_id},m,{upsert:!0,new:!0},function(t,a){t||i(e)}))})}))}):i(e)}})}}var n,r,s=a(1),o=a(17),c=a(6).getModel(e),l=a(7).getModel(e),d=a(2).getModel(e);a(3).getModel(e),a(11).getModel(e),a(4).getModel(e),a(10),n=a(24).parseString,r=a(12),s({url:"http://static.cricinfo.com/rss/livescores.xml",jar:!0},function(e,a,r){e?t({status:"error in fetch"}):n(r,function(e,a){0<a.rss.channel.length?(i(a.rss.channel[0].item),t({status:"success",results:a})):t({status:"no livescore found"})})})},scores:function(e,t){function i(e){if(0<e.length){var t=e.pop();"on"==t.team_1.teamid.autofetch||"on"==t.team_2.teamid.autofetch?c({url:t.auto_match_link,jar:!0},function(a,l,d){var m,u,p,_,f,y;a||(m=function(t){var a=JSON.parse(JSON.stringify(t));delete a.team_1.teamid,delete a.team_2.teamid,delete a.tournament,a.team_1.teamid=t.team_1.teamid._id,a.team_2.teamid=t.team_2.teamid._id,a.tournament=t.tournament._id,n.update({auto_match_id:t.auto_match_id},a,function(a,n){a?(c({url:"http://localhost:8000/api/v1/pushdata",qs:{match_id:t._id}},function(e,t,a){e&&console.log(e)}),i(e)):"live"==t.current_match_status?(new r(y).save(function(a,n){a||c({url:"http://localhost:8000/api/v1/pushdata",qs:{match_id:t._id}},function(e,t,a){e&&console.log(e)}),i(e)}),c({url:"http://localhost:8000/api/v1/pushdata",qs:{match_id:t._id}},function(e,t,a){e&&console.log(e)})):(c({url:"http://localhost:8000/api/v1/pushdata",qs:{match_id:t._id}},function(e,t,a){e&&console.log(e)}),i(e))})},a=function(e,t){c({url:t,jar:!0},function(t,a,i){var n,r,l=o.load(i);e.team_1.scorecard_auto=[],e.team_2.scorecard_auto=[],e.team_1.bowler_scorecard_auto=[],e.team_2.bowler_scorecard_auto=[],e.team_1.fall_of_wickets=[],e.team_2.fall_of_wickets=[],n=1,r=1,l(".sub-module.scorecard").each(function(t){var a,i,s,o;try{a=l(this).find("H2").text(),"test"==e.match_type&&(-1<a.indexOf("1st")?n=1:-1<a.indexOf("2nd")&&(n=2))}catch(e){}if(-1<a.indexOf(p.team_name)||-1<a.indexOf(p.short_name)||-1<a.indexOf(p.alias)){try{u(t,"team1",e),i=l(this).find(".flex-row>.wrap.header>.cell.runs").eq(1).text(),l(this).find(".flex-row>.wrap.batsmen").each(function(){var t={innings:n,player_id:Math.floor(2*Math.random())+1e6,player_name:l(this).find(".cell.batsmen").text(),score:l(this).find(".cell.runs").eq(0).text(),wicket_notes:l(this).find(".cell.commentary").text()};"M"==i?(t.balls=l(this).find(".cell.runs").eq(2).text(),t.fours=l(this).find(".cell.runs").eq(3).text(),t.sixes=l(this).find(".cell.runs").eq(4).text(),t.strike_rate=l(this).find(".cell.runs").eq(5).text()):(t.balls=l(this).find(".cell.runs").eq(1).text(),t.fours=l(this).find(".cell.runs").eq(2).text(),t.sixes=l(this).find(".cell.runs").eq(3).text(),t.strike_rate=l(this).find(".cell.runs").eq(4).text()),t.wicket="not out"!=t.wicket_notes&&"retired hurt"!=t.wicket_notes?1:0,"not out"==t.wicket_notes&&(t.playing=!0),e.team_1.scorecard_auto.push(t)})}catch(e){}try{l(this).find(".flex-row>.wrap.dnb>.cell").each(function(){-1<l(this).find("span").text().indexOf("wicket")&&null!=l(this).text()&&l(this).text().split(":")[1].split("),").forEach(function(t){t={innings:n,player_name:t.split("(")[1].split(",")[0],overs:t.split("(")[1].split(",")[1].replace(" ","").split(" ")[0].split(".")[0],balls:t.split("(")[1].split(",")[1].replace(" ","").split(" ")[0].split(".")[1],wicket_position:t.split("(")[0].split(" ").join("").split("-")[0],score:t.split("(")[0].split(" ").join("").split("-")[1]},e.team_1.fall_of_wickets.push(t)})})}catch(e){}try{l(this).find(".scorecard-section.bowling tbody tr").each(function(t,a){t={innings:n,player_name:l(this).find("td").eq(0).text(),overs:l(this).find("td").eq(2).text(),maiden:l(this).find("td").eq(3).text(),runs:l(this).find("td").eq(4).text(),numberofwickets:l(this).find("td").eq(5).text(),economy:l(this).find("td").eq(6).text(),dots:l(this).find("td").eq(7).text(),fours:l(this).find("td").eq(8).text(),sixes:l(this).find("td").eq(9).text(),wide:l(this).find("td").eq(10).text(),noball:l(this).find("td").eq(11).text()},void 0!==t.overs&&null!=t.overs&&(t.balls=6*parseInt(t.overs.split(".")[0])+parseInt(t.overs.split(".")[1])),e.team_1.bowler_scorecard_auto.push(t)})}catch(e){}if(a=l(this).find(".wrap.total > .cell").eq(1).text(),s=l(this).find(".flex-row>.wrap.extras>.cell").eq(1).text(),1==n){try{-1<a.indexOf("all out")?(e.team_1.scores=a.split("(")[0].replace(" all out ",""),e.team_1.wickets=10):(e.team_1.scores=a.split("(")[0].split("/")[0],e.team_1.wickets=a.split("(")[0].split("/")[1]),e.team_1.overs=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[0],1<a.split("(")[1].split(",")[0].split(" ")[0].split(".").length?e.team_1.balls=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[1]:e.team_1.balls=0}catch(e){}try{o=s.split(" (")[1].replace(")","").split(","),void 0!==o&&(e.team_1.byes=0,e.team_1.legbyes=0,e.team_1.wide=0,e.team_1.noball=0,o.forEach(function(t,a){0!=a&&(t=t.replace(" ","")),a=t.split(" ")[0],t=t.split(" ")[1],"b"==a&&(e.team_1.byes=t),"lb"==a&&(e.team_1.legbyes=t),"w"==a&&(e.team_1.wide=t),"nb"==a&&(e.team_1.noball=t)}))}catch(e){}try{e.team_1.runrate=a.split("(")[1].split(",")[1].replace(")","").replace("RR: ","").replace(" ","")}catch(e){}}else if(2==n){try{-1<a.indexOf("all out")?(e.team_1.second_innings_scores=a.split("(")[0].replace(" all out ",""),e.team_1.second_innings_wickets=10):(e.team_1.second_innings_scores=a.split("(")[0].split("/")[0],e.team_1.second_innings_wickets=a.split("(")[0].split("/")[1]),e.team_1.second_innings_overs=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[0],1<a.split("(")[1].split(",")[0].split(" ")[0].split(".").length?e.team_1.second_innings_balls=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[1]:e.team_1.second_innings_balls=0}catch(e){}try{void 0!==(o=s.split(" (")[1].replace(")","").split(","))&&(e.team_1.second_innings_byes=0,e.team_1.second_innings_legbyes=0,e.team_1.second_innings_wide=0,e.team_1.second_innings_noball=0,o.forEach(function(t,a){0!=a&&(t=t.replace(" ","")),a=t.split(" ")[0],t=t.split(" ")[1],"b"==a&&(e.team_1.second_innings_byes=t),"lb"==a&&(e.team_1.second_innings_legbyes=t),"w"==a&&(e.team_1.second_innings_wide=t),"nb"==a&&(e.team_1.second_innings_noball=t)}))}catch(e){}try{e.team_1.runrate=a.split("(")[1].split(",")[1].replace(")","").replace("RR: ","").replace(" ","")}catch(e){}}}else if(-1<a.indexOf(_.team_name)||-1<a.indexOf(_.short_name)||-1<a.indexOf(_.alias)){i=l(this).find(".flex-row>.wrap.header>.cell.runs").eq(1).text(),"test"==e.match_type&&(-1<a.indexOf("1st")?r=1:-1<a.indexOf("2nd")&&(r=2));try{l(this).find(".flex-row>.wrap.batsmen").each(function(){u(t,"team2",e);var a={innings:r,player_id:Math.floor(2*Math.random())+1e6,player_name:l(this).find(".cell.batsmen").text(),score:l(this).find(".cell.runs").eq(0).text(),wicket_notes:l(this).find(".cell.commentary").text()};"M"==i?(a.balls=l(this).find(".cell.runs").eq(2).text(),a.fours=l(this).find(".cell.runs").eq(3).text(),a.sixes=l(this).find(".cell.runs").eq(4).text(),a.strike_rate=l(this).find(".cell.runs").eq(5).text()):(a.balls=l(this).find(".cell.runs").eq(1).text(),a.fours=l(this).find(".cell.runs").eq(2).text(),a.sixes=l(this).find(".cell.runs").eq(3).text(),a.strike_rate=l(this).find(".cell.runs").eq(4).text()),a.wicket="not out"!=a.wicket_notes&&"retired hurt"!=a.wicket_notes?1:0,"not out"==a.wicket_notes&&(a.playing=!0),e.team_2.scorecard_auto.push(a)})}catch(e){}try{l(this).find(".flex-row>.wrap.dnb>.cell").each(function(){-1<l(this).find("span").text().indexOf("wicket")&&null!=l(this).text()&&l(this).text().split(":")[1].split("),").forEach(function(t){t={innings:r,player_name:t.split("(")[1].split(",")[0],overs:t.split("(")[1].split(",")[1].replace(" ","").split(" ")[0].split(".")[0],balls:t.split("(")[1].split(",")[1].replace(" ","").split(" ")[0].split(".")[1],wicket_position:t.split("(")[0].split(" ").join("").split("-")[0],score:t.split("(")[0].split(" ").join("").split("-")[1]},e.team_2.fall_of_wickets.push(t)})})}catch(e){}try{l(this).find(".scorecard-section.bowling tbody tr").each(function(t,a){t={innings:r,player_name:l(this).find("td").eq(0).text(),overs:l(this).find("td").eq(2).text(),maiden:l(this).find("td").eq(3).text(),runs:l(this).find("td").eq(4).text(),numberofwickets:l(this).find("td").eq(5).text(),economy:l(this).find("td").eq(6).text(),dots:l(this).find("td").eq(7).text(),fours:l(this).find("td").eq(8).text(),sixes:l(this).find("td").eq(9).text(),wide:l(this).find("td").eq(10).text(),noball:l(this).find("td").eq(11).text()},void 0!==t.overs&&null!=t.overs&&(t.balls=6*parseInt(t.overs.split(".")[0])+parseInt(t.overs.split(".")[1])),e.team_2.bowler_scorecard_auto.push(t)})}catch(e){}if(a=l(this).find(".wrap.total > .cell").eq(1).text(),s=l(this).find(".flex-row>.wrap.extras>.cell").eq(1).text(),1==r){try{-1<a.indexOf("all out")?(e.team_2.scores=a.split("(")[0].replace(" all out ",""),e.team_2.wickets=10):(e.team_2.scores=a.split("(")[0].split("/")[0],e.team_2.wickets=a.split("(")[0].split("/")[1])}catch(e){}try{e.team_2.overs=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[0],1<a.split("(")[1].split(",")[0].split(" ")[0].split(".").length?e.team_2.balls=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[1]:e.team_2.balls=0}catch(e){}try{void 0!==(o=s.split(" (")[1].replace(")","").split(","))&&(e.team_2.byes=0,e.team_2.legbyes=0,e.team_2.wide=0,e.team_2.noball=0,o.forEach(function(t,a){0!=a&&(t=t.replace(" ","")),a=t.split(" ")[0],t=t.split(" ")[1],"b"==a&&(e.team_2.byes=t),"lb"==a&&(e.team_2.legbyes=t),"w"==a&&(e.team_2.wide=t),"nb"==a&&(e.team_2.noball=t)}))}catch(e){}try{e.team_2.runrate=a.split("(")[1].split(",")[1].replace(")","").replace("RR: ","").replace(" ","")}catch(e){}}else if(2==r){try{-1<a.indexOf("all out")?(e.team_2.second_innings_scores=a.split("(")[0].replace(" all out ",""),e.team_2.second_innings_wickets=10):(e.team_2.second_innings_scores=a.split("(")[0].split("/")[0],e.team_2.second_innings_wickets=a.split("(")[0].split("/")[1])}catch(e){}try{e.team_2.second_innings_overs=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[0],1<a.split("(")[1].split(",")[0].split(" ")[0].split(".").length?e.team_2.second_innings_balls=a.split("(")[1].split(",")[0].split(" ")[0].split(".")[1]:e.team_2.second_innings_balls=0}catch(e){}try{void 0!==(o=s.split(" (")[1].replace(")","").split(","))&&(e.team_2.second_innings_byes=0,e.team_2.second_innings_legbyes=0,e.team_2.second_innings_wide=0,e.team_2.second_innings_noball=0,o.forEach(function(t,a){0!=a&&(t=t.replace(" ","")),a=t.split(" ")[0],t=t.split(" ")[1],"b"==a&&(e.team_2.second_innings_byes=t),"lb"==a&&(e.team_2.second_innings_legbyes=t),"w"==a&&(e.team_2.second_innings_wide=t),"nb"==a&&(e.team_2.second_innings_noball=t)}))}catch(e){}try{e.team_2.runrate=a.split("(")[1].split(",")[1].replace(")","").replace("RR: ","").replace(" ","")}catch(e){}}}}),"result"==e.current_match_status&&(e.status=l(".game-status").eq(1).text()),"live"==e.current_match_status?c({url:e.auto_match_link,jar:!0},function(t,a,i){var n,r=o.load(i);if(-1<f.indexOf(p.team_name.toLowerCase())||-1<f.indexOf(p.short_name.toLowerCase())||-1<f.indexOf(p.alias.toLowerCase())){try{y.team=p._id,y.overs=e.team_1.overs,y.balls=e.team_1.balls,e.team_1.status=!0,r(".commentary-item").each(function(){var t=r(this).find(".over > .time-stamp").text().split(".")[0],a=r(this).find(".over > .time-stamp").text().split(".")[1],i=r(this).find(".over > .over-circle").text(),n=r(this).find(".description").text();void 0!==a&&void 0!==i&&s.findOneAndUpdate({match_id:e._id,ball:a,over:t,team:"team1"},{match_id:e._id,ball:a,over:t,team:"team1",created_At:new Date,text:n},{upsert:!0,new:!0},function(e,t){}),6==a&&(t=parseInt(t)+1,a=0),t==e.team_1.overs&&a==e.team_1.balls&&(y.event={},"0"==i&&(y.event.dot=0),"1"==i&&(y.event.one=1),"2"==i&&(y.event.two=2),"3"==i&&(y.event.three=3),"4"==i&&(y.event.four=4),"6"==i&&(y.event.six=6),"W"==i&&(y.event.wicket=1),-1<i.indexOf("w")&&(y.event.wide=1))})}catch(e){}try{y.batsman_id=[],r(".sub-module.current-inning table>tbody").eq(0).each(function(){r(this).find("tr").each(function(){var t,a=r(this).find("td").eq(0).text();for(-1<a.indexOf("*")&&(t=r(this).find("td").eq(0).text(),y.active_batsman={player_name:t,runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""}),t=0;t<e.team_1.scorecard_auto.length;t++)-1<e.team_1.scorecard_auto[t].player_name.indexOf(a.replace("*",""))&&(e.team_1.scorecard_auto[t].striker_end_batsman=!0);y.batsman_id.push({player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""})})})}catch(e){}try{for(r(".sub-module.current-inning table>tbody").eq(1).find("tr").each(function(e){if(0==e){y.active_bowler={};var t=r(this).find("td").eq(0).text().split("(");y.active_bowler.player_name=0<t.length?t[0]:t,y.active_bowler.age="",y.active_bowler.type="",y.active_bowler.overs=r(this).find("td").eq(1).text(),y.active_bowler.maiden=r(this).find("td").eq(2).text(),y.active_bowler.runs=r(this).find("td").eq(3).text(),y.active_bowler.wicket=r(this).find("td").eq(4).text()}1==e&&0!=parseInt(r(this).find("td").eq(1).text().split(".")[1])&&(y.active_bowler={},t=r(this).find("td").eq(0).text().split("("),y.active_bowler.player_name=0<t.length?t[0]:t,y.active_bowler.age="",y.active_bowler.type="",y.active_bowler.overs=r(this).find("td").eq(1).text(),y.active_bowler.maiden=r(this).find("td").eq(2).text(),y.active_bowler.runs=r(this).find("td").eq(3).text(),y.active_bowler.wicket=r(this).find("td").eq(4).text())}),n=0;n<e.team_1.bowler_scorecard_auto.length;n++)-1<e.team_1.bowler_scorecard_auto[n].player_name.indexOf(y.active_bowler.player_name.replace("*",""))&&(e.team_1.bowler_scorecard_auto[n].playing=!0)}catch(e){}try{r(".sub-module.current-inning table>tbody").eq(1).each(function(){r(this).find("tr").each(function(){-1<r(this).find("td").eq(0).text().indexOf("*")&&(y.active_batsman={player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""}),y.batsman_id.push({player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""})})})}catch(e){}}if(-1<f.indexOf(_.team_name.toLowerCase())||-1<f.indexOf(_.short_name.toLowerCase())||-1<f.indexOf(_.alias.toLowerCase())){try{y.team=_._id,y.overs=e.team_2.overs,y.balls=e.team_2.balls,e.team_2.status=!0,r(".commentary-item").each(function(){var t=r(this).find(".over > .time-stamp").text().split(".")[0],a=r(this).find(".over > .time-stamp").text().split(".")[1],i=r(this).find(".over > .over-circle").text(),n=r(this).find(".description").text();void 0!==a&&void 0!==i&&s.findOneAndUpdate({match_id:e._id,ball:a,over:t,team:"team2"},{match_id:e._id,ball:a,over:t,created_At:new Date,team:"team2",text:n},{upsert:!0,new:!0},function(e,t){}),6==a&&(t=parseInt(t)+1,a=0),t==e.team_2.overs&&a==e.team_2.balls&&(y.event={},"0"==i&&(y.event.dot=0),"1"==i&&(y.event.one=1),"2"==i&&(y.event.two=2),"3"==i&&(y.event.three=3),"4"==i&&(y.event.four=4),"6"==i&&(y.event.six=6),"W"==i&&(y.event.wicket=1),-1<i.indexOf("w")&&(y.event.wide=1))})}catch(e){}try{y.batsman_id=[],r(".sub-module.current-inning table>tbody").eq(0).each(function(){r(this).find("tr").each(function(){var t,a=r(this).find("td").eq(0).text();for(-1<a.indexOf("*")&&(t=r(this).find("td").eq(0).text(),y.active_batsman={player_name:t,runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""}),t=0;t<e.team_2.scorecard_auto.length;t++)-1<e.team_2.scorecard_auto[t].player_name.indexOf(a.replace("*",""))&&(e.team_2.scorecard_auto[t].striker_end_batsman=!0);y.batsman_id.push({player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""})})})}catch(e){}try{for(r(".sub-module.current-inning table>tbody").eq(1).find("tr").each(function(e){if(0==e){y.active_bowler={};var t=r(this).find("td").eq(0).text().split("(");y.active_bowler.player_name=0<t.length?t[0]:t,y.active_bowler.age="",y.active_bowler.type="",y.active_bowler.overs=r(this).find("td").eq(1).text(),y.active_bowler.maiden=r(this).find("td").eq(2).text(),y.active_bowler.runs=r(this).find("td").eq(3).text(),y.active_bowler.wicket=r(this).find("td").eq(4).text()}1==e&&0!=parseInt(r(this).find("td").eq(1).text().split(".")[1])&&(y.active_bowler={},t=r(this).find("td").eq(0).text().split("("),y.active_bowler.player_name=0<t.length?t[0]:t,y.active_bowler.age="",y.active_bowler.type="",y.active_bowler.overs=r(this).find("td").eq(1).text(),y.active_bowler.maiden=r(this).find("td").eq(2).text(),y.active_bowler.runs=r(this).find("td").eq(3).text(),y.active_bowler.wicket=r(this).find("td").eq(4).text())}),n=0;n<e.team_2.bowler_scorecard_auto.length;n++)-1<e.team_2.bowler_scorecard_auto[n].player_name.indexOf(y.active_bowler.player_name.replace("*",""))&&(e.team_2.bowler_scorecard_auto[n].playing=!0)}catch(e){}try{r(".sub-module.current-inning table>tbody").eq(1).each(function(){r(this).find("tr").each(function(){-1<r(this).find("td").eq(0).text().indexOf("*")&&(y.active_batsman={player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""}),y.batsman_id.push({player_name:r(this).find("td").eq(0).text(),runs:r(this).find("td").eq(1).text(),balls:r(this).find("td").eq(2).text(),fours:r(this).find("td").eq(3).text(),sixes:r(this).find("td").eq(4).text(),strike_rate:r(this).find("td").eq(5).text(),age:0,type:""})})})}catch(e){}}m(e)}):"result"==e.current_match_status?(e.team_1.battingcompleted=!0,e.team_2.battingcompleted=!0,t="http://www.espncricinfo.com"+l(".first-group>.sub>.game.react-router-link").attr("href"),"live"==l(".first-group>.sub>.game.react-router-link>.link-text").text().toLowerCase()?c({url:t,jar:!0},function(t,a,i){var n=o.load(i);try{n(".sub-module.current-inning table>tbody").eq(0).each(function(){n(this).find("tr").each(function(){for(var t=n(this).find("td").eq(0).text(),a=0;a<e.team_1.scorecard_auto.length;a++)-1<e.team_1.scorecard_auto[a].player_name.indexOf(t)&&(e.team_1.scorecard_auto[a].playing=!0);for(a=0;a<e.team_2.scorecard_auto.length;a++)-1<e.team_2.scorecard_auto[a].player_name.indexOf(t)&&(e.team_2.scorecard_auto[a].playing=!0)})})}catch(e){}try{n(".sub-module.scorecard-summary>.content>.inning>.two-col-table").eq(2).each(function(){n(this).find("li>a").eq(0).text().replace("*",""),n(this).find("li>a").eq(1).text().replace("*","")})}catch(e){}try{n(".sub-module.current-inning table>tbody").eq(1).find("tr").each(function(t){if(0==t){t=n(this).find("td").eq(0).text().split("(");var a=0<t.length?t[0]:t;for(t=0;t<e.team_1.bowler_scorecard_auto.length;t++)-1<e.team_1.bowler_scorecard_auto[t].player_name.indexOf(a)&&(e.team_1.bowler_scorecard_auto[t].playing=!0);for(t=0;t<e.team_2.bowler_scorecard_auto.length;t++)-1<e.team_2.bowler_scorecard_auto[t].player_name.indexOf(a)&&(e.team_2.bowler_scorecard_auto[t].playing=!0)}if(1==t){for(t=n(this).find("td").eq(0).text().split("("),a=0<t.length?t[0]:t,t=0;t<e.team_1.bowler_scorecard_auto.length;t++)-1<e.team_1.bowler_scorecard_auto[t].player_name.indexOf(a)&&(e.team_1.bowler_scorecard_auto[t].playing=!0);for(t=0;t<e.team_2.bowler_scorecard_auto.length;t++)-1<e.team_2.bowler_scorecard_auto[t].player_name.indexOf(a)&&(e.team_2.bowler_scorecard_auto[t].playing=!0)}})}catch(e){}m(e)}):c({url:t,jar:!0},function(t,a,i){var n=o.load(i);try{n(".sub-module.scorecard-summary>.content>.inning>.two-col-table").eq(2).each(function(){for(var t=n(this).find("li>a").eq(0).text().replace("*",""),a=n(this).find("li>a").eq(1).text().replace("*",""),i=0;i<e.team_1.scorecard_auto.length;i++)(-1<e.team_1.scorecard_auto[i].player_name.indexOf(t)||-1<e.team_1.scorecard_auto[i].player_name.indexOf(a))&&(e.team_1.scorecard_auto[i].playing=!0);for(i=0;i<e.team_2.scorecard_auto.length;i++)(-1<e.team_2.scorecard_auto[i].player_name.indexOf(t)||-1<e.team_2.scorecard_auto[i].player_name.indexOf(a))&&(e.team_2.scorecard_auto[i].playing=!0)})}catch(e){}try{n(".sub-module.scorecard-summary>.content>.inning>.two-col-table").eq(3).each(function(){for(var t=n(this).find("li>a").eq(0).text().replace("*",""),a=n(this).find("li>a").eq(1).text().replace("*",""),i=0;i<e.team_1.bowler_scorecard_auto.length;i++)(-1<e.team_1.bowler_scorecard_auto[i].player_name.indexOf(t)||-1<e.team_1.bowler_scorecard_auto[i].player_name.indexOf(a))&&(e.team_1.bowler_scorecard_auto[i].playing=!0);for(i=0;i<e.team_2.bowler_scorecard_auto.length;i++)(-1<e.team_2.bowler_scorecard_auto[i].player_name.indexOf(t)||-1<e.team_2.bowler_scorecard_auto[i].player_name.indexOf(a))&&(e.team_2.bowler_scorecard_auto[i].playing=!0)})}catch(e){}m(e)})):m(e)})},u=function(e,t,a){0==e?(a.innings.first=t,a.innings.current=1):1==e?("limited_over"==a.match_type&&("team1"==a.innings.first?(a.team_2.targetscore=a.team_1.scores,a.team_2.totalovers=a.team_1.overs,a.team_1.battingcompleted=!0):(a.team_1.targetscore=a.team_2.scores,a.team_1.totalovers=a.team_2.overs,a.team_2.battingcompleted=!0)),a.innings.second=t,a.innings.current=2):2==e?(a.innings.third=t,a.innings.current=3):3==e&&(a.innings.fourth=t,a.innings.current=4)},d=o.load(d),l=d(".match-detail-container >.match-detail--item>.match-detail--right").eq(1).text(),p=t.team_1.teamid,_=t.team_2.teamid,f=d(".sub-module.current-inning").find("header > h1").text().toLowerCase(),y={},y.match_id=t._id,t.current_match_status=d(".game-time").text().toLowerCase(),t.match_view_status="active",-1<l.indexOf("elected")&&(-1<l.indexOf(p.team_name)||-1<l.indexOf(p.short_name)||-1<l.indexOf(p.alias)?(t.team_1.toss=!0,t.team_2.toss=!1):(-1<l.indexOf(_.team_name)||-1<l.indexOf(_.short_name)||-1<l.indexOf(_.alias))&&(t.team_1.toss=!1,t.team_2.toss=!0)),"live"==t.current_match_status&&(-1<f.indexOf(p.team_name)&&(t.team_1.teamid.status=!0,t.team_2.teamid.status=!1),-1<f.indexOf(_.team_name)&&(t.team_1.teamid.status=!1,t.team_2.teamid.status=!0),t.innings={}),void 0!==d(".first-group>.sub>.scorecard.react-router-link").attr("href")?(d="http://www.espncricinfo.com"+d(".first-group>.sub>.scorecard.react-router-link").attr("href"),a(t,d)):m(t))}):i(e)}}var n,r,s,o,c=a(1);a(17),a(6).getModel(e),a(7).getModel(e),n=a(2).getModel(e),a(3).getModel(e),r=a(3).getModel(e),s=a(4).getModel(e),a(10),o=a(12),n.find({scoreupdate:"auto"}).populate("team_1.teamid").populate("team_2.teamid").populate("tournament").exec(function(e,a){e?t({status:"error"}):(e=JSON.parse(JSON.stringify(a)),i(e),t({status:"success",data:a}))})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e=a(74);var i=a(36),n=a(29),r=a(31).initialize();e.schedule("* */1 * * *",function(){console.log("autogenerate match cron job"),i.matches(r,function(e){})}),e.schedule("*/10 * * * * *",function(){console.log("autogenerate scores cron job"),i.scores(r,function(e){})}),e.schedule("* */4 * * *",function(){console.log("auto fetch news"),n.fetch(r,{},function(e){})})},function(e,t){e.exports=require("node-cron")}]);